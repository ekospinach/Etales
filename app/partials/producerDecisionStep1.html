<div id="content" class="bs-header">
    <div class="container">
        <h1>Products portfolio</h1>
        <p>Step 1 of 4, determine your products portfolio, i.e. brand names, variant(s) of each brand with their respective name(s) and product composition or product specification, including packaging format. </p>
    </div>
</div>


<div class="container bs-docs-container">
  <div class="row">
    <div class="col-md-12">
      <div class="bs-docs-section">
        <h4>Step 1 of 4</h4>
        <div class="pull-left" style="width:33%">
          <h3 style="margin-top:0px">Products Portfolio Management</h3>
          <div class="btn-group pull-left">
            <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">
              Category <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
              <li class=""><a ng-click="showView(producerID,period,'Elecssories',language)">Elecssories</a></li>
              <li class=""><a ng-click="showView(producerID,period,'HealthBeauty',language)">HealthBeauty</a></li>
            </ul>
          </div>
          <div class="btn-group pull-left" data-toggle="buttons" style="margin-left:10px">
            <label class="btn btn-primary" ng-click="showView(producerID,period,category,'English')">
              <input type="radio" name="options"> English
            </label>
            <label class="btn btn-primary" ng-click="showView(producerID,period,category,'Chinese')">
              <input type="radio" name="options"> Chinese
            </label>
          </div>
        </div>
        <div class="pull-right" style="width:33%">
          <progress percent="percentageExpend" class="progress active">{{surplusExpend}}</progress>
          <small>
            <em>Total Avaliable Budget for Remaing Period</em>
          </small>
          <progress percent="percentageProduction" class="progress progress-suceess active progress-striped">{{surplusProduction}}</progress>
          <small>
            <em>{{category}} Available Capacity</em>
          </small>
        </div>
        <div style="clear:both"></div>
        <div collapse="isCollapsed">
          <div class="well well-large">
            <button type="button pull-right" class="close" aria-hidden="true" ng-click="closeInfo()">&times;</button>
            <table class="table table-striped">
              <tr style="backgroud-color:gray">
                <th></th>
                <th style="text-align:center">Previous period({{currentPeriod}})</th>
                <th></th>
              </tr>
              <tr>
                <!--<td>Unit Production cost:</td>-->
                <td>Acquired design technology level:{{category=="Elecssories"?companyHistory.acquiredTechnologyLevel[0]:companyHistory.acquiredTechnologyLevel[1]}}</td>
                <td>Acquired design level:{{category=="Elecssories"?companyHistory.acquiredTechnologyLevel[0]:companyHistory.acquiredTechnologyLevel[1]}}</td>
                <td></td>
              </tr>
              <tr style="margin-top:20px;backgroud-color:gray">
                <th></th>
                <th style="text-align:center">Previous period({{(currentPeriod-1)}})</th>
                <th></th>
              </tr>
              <tr>
                <th>Sales Volume:{{variantHistory.supplierView[0].supplierChannelView[4].salesVolume[2]}}</th>
                <td>unit production cost:{{variantHistory.supplierView[0].currentUnitAverageCost}}</td>
                <td>production Volume:{{variantHistory.supplierView[0].productionVolume}}</td>
              </tr>
              <tr>
                <td>initial inventory:{{variantHistory.supplierView[0].initialInventory[4].volume}}</td>
                <td>Current price BM:{{variantHistory.supplierView[0].currentPriceBM}}</td>
                <td>Current price emall:{{variantHistory.supplierView[0].currentPriceEmall}}</td>
              </tr>         
              <tr>
                <td>Design Index:{{variantHistory.supplierView[0].composition[0]}}</td>
                <td>Technology Level:{{variantHistory.supplierView[0].composition[1]}}</td>
                <td>Raw Materials Quality:{{variantHistory.supplierView[0].composition[2]}}</td>
              </tr>
            </table>
          </div>
        </div>
        <table class="table table-hover">
          <tr>
            <th>{{labelLanguages.Brand}}</th>
            <th ng-repeat='product in products'>{{product.parentBrandName}}</th>
          </tr>
          <tr>
            <th>{{labelLanguages.Variant}}</th>
            <th ng-repeat='product in products'>
              <div style="clear:both"></div>
              <p class="pull-left">
                {{product.varName}}
              </p>
              <button type="button" class="btn btn-primary btn-xs pull-left" style="margin-left:5px" ng-click="getMoreInfo(product.parentBrandName,product.varName)">More</button>
              <button type="button" class="btn btn-danger btn-xs pull-left {{(product.dateOfBirth==-4)?'hide':'show'}}" ng-click="deleteProduct(category,product.parentBrandName,product.varName)" style="margin-left:5px">Delete</button>
              <div style="clear:both"></div>
            </th>
          </tr>
          <tr>
            <th>
              <p class="text-primary" Popover-animation="true" popover="{{infoLanguages.PF}}" popover-title="{{labelLanguages.PF}}" popover-trigger="mouseenter" popover-placement="bottom">{{labelLanguages.PF}}<span style="color:red">*</span></p>
            </th>
            <th ng-repeat='product in products'>
              <a href="#" editable-select="product.packFormat" e-ng-options="p.value as p.text for p in packs" onaftersave="updateProducerDecision(category,product.parentBrandName,product.varName,'packFormat','0',$index)">{{ selectPacks(product.parentBrandName,product.varName) }}</a>
            </th>
          </tr>
          <tr>
            <th>
              <p class="text-primary" Popover-animation="true" popover="{{infoLanguages.TL}}" popover-title="{{labelLanguages.TL}}" popover-trigger="mouseenter" popover-placement="bottom">{{labelLanguages.TL}}<span style="color:red">*</span></p>
            </th>
            <th ng-repeat='product in products'>
              <a href="#" editable-text="product.composition[1]" onbeforesave="checkTechnology(category,product.parentBrandName,product.varName,'composition','1',$index,$data)" onaftersave="updateProducerDecision(category,product.parentBrandName,product.varName,'composition','1',$index)">{{ product.composition[1] || 0 }}</a>
            </th>
          </tr>
          <tr>
            <th>
              <p style="display:{{HeaShow}}" class="text-primary" Popover-animation="true" popover="{{infoLanguages.AA}}" popover-title="{{labelLanguages.AA}}" popover-trigger="mouseenter" popover-placement="bottom">{{labelLanguages.AA}}<span style="color:red">*</span></p>
              <p style="display:{{EleShow}}" class="text-primary" Popover-animation="true" popover="{{infoLanguages.DL}}" popover-title="{{labelLanguages.DL}}" popover-trigger="mouseenter" popover-placement="bottom">{{labelLanguages.DL}}<span style="color:red">*</span></p>
            </th>
            <th ng-repeat='product in products'>
              <a href="#" editable-text="product.composition[0]" onbeforesave="checkDesign(category,product.parentBrandName,product.varName,'composition','0',$index,$data)" onaftersave="updateProducerDecision(category,product.parentBrandName,product.varName,'composition','0',$index)">{{ product.composition[0] || 0 }}</a>
            </th>
          </tr>
          <tr>
            <th>
              <p style="display:{{HeaShow}}" class="text-primary" Popover-animation="true" popover="{{infoLanguages.SL}}" popover-title="{{labelLanguages.SL}}" popover-trigger="mouseenter" popover-placement="bottom">{{labelLanguages.SL}}<span style="color:red">*</span></p>
              <p style="display:{{EleShow}}" class="text-primary" Popover-animation="true" popover="{{infoLanguages.QORM}}" popover-title="{{labelLanguages.QORM}}" popover-trigger="mouseenter" popover-placement="bottom">{{labelLanguages.QORM}}<span style="color:red">*</span></p>
            </th>
            <th ng-repeat='product in products'>
              <a href="#" editable-text="product.composition[2]" onbeforesave="checkRMQ(category,product.parentBrandName,product.varName,'composition','2',$index,$data)" onaftersave="updateProducerDecision(category,product.parentBrandName,product.varName,'composition','2',$index)">{{ product.composition[2] || 0 }}</a>
            </th>
          </tr>
          <tr>
            <th>
              <p class="text-primary" Popover-animation="true" popover="{{infoLanguages.EPV}}" popover-title="{{labelLanguages.EPV}}" popover-trigger="mouseenter" popover-placement="bottom">{{labelLanguages.EPV}}<span style="color:red">*</span></p>
            </th>
            <th ng-repeat='product in products'>
              <a href="#" editable-text="product.production" onbeforesave="checkProduction(category,product.parentBrandName,product.varName,'production','0',$index,$data)" onaftersave="updateProducerDecision(category,product.parentBrandName,product.varName,'production','0',$index)">{{ product.production || 0 }}</a>
            </th>
          </tr>
          <tr>
            <th>
              <p class="text-primary" Popover-animation="true" popover="{{infoLanguages.DTP}}" popover-title="{{labelLanguages.DTP}}" popover-trigger="mouseenter" popover-placement="bottom">{{labelLanguages.DTP}}<span style="color:red">*</span></p>
            </th>
            <th ng-repeat='product in products'>
              <a href="#" editable-checkbox="product.discontinue" e-title="{{labelLanguages.DTP}}?" onaftersave="updateProducerDecision(category,product.parentBrandName,product.varName,'discontinue','0',$index)">{{ product.discontinue && "DisContinue" || "Continue!" }}</a>
            </th>
          </tr>    
        </table>
        <div>
          <a ng-click="openProductModal()" class="btn btn-success">New Product</a>
          <a href="" class="btn btn-primary" disabled="disabled">Commit Portflio decision</a>
          <a href="/#/producerDecisionStep2" class="btn btn-primary">Next</a>
        </div>
      </div>
    </div>
  </div>
</div>
<!--dialog start-->
<div modal="productModal" class="hide" close="closeProductModal()" options="productModalOpts">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeProductModal()">&times;</button>
        <h4>New Product</h4>
      </div>
      <form method="POST" name="myForm">
        <div class="modal-body">
          <div class="control-group">
            <tabset>
              <tab heading="Launch New Brand" select="setAddNewBrand()">
                <div class="form">
                  <div class="form-group">
                    <label for="lauchNewCategory">Choose Catagory:</label>
                    <select class="form-control" ng-model="lauchNewCategory" ng-change="setBrandName(lauchNewCategory)">
                      <option value="1">Elecssories</option>
                      <option value="2">HealthBeauty</option>
                    </select>
                  </div>
                  <div class="form-group" ng-class="{'has-error': myForm.newBrandName.$invalid}">
                    <label for="lauchNewBrandName">Enter New Brand Name:</label>
                    <div class="input-group">
                      <span class="input-group-addon">{{brandFirstName}}</span>
                      <input type="text"  class="form-control" ng-model="lauchNewBrandName" name="newBrandName" ng-maxlength="4" required>
                      <span class="input-group-addon">{{brandLastName}}</span>
                    </div>
                  </div>
                  <div class="form-group" ng-class="{'has-error':myForm.lauchVarName.$invalid}">
                    <label for="lauchNewVarName">Enter New Variant Name</label>
                    <div class="input-group">
                      <span class="input-group-addon">_</span>
                      <input type="text" name="lauchVarName" class="form-control" ng-model="lauchNewVarName" ng-maxlength="4" required>
                    </div>
                  </div>
                </div>
              </tab>
              <tab heading="Add new product under existed Brand" select="setAddNewProUnderBrand()">
                <div class="form">
                  <div class="form-group">
                    <label for="addNewCategory">Choose Catagory:</label>
                    <select class="form-control" ng-model="addNewCategory" ng-change="loadAllBrand(addNewCategory)">
                      <option value="1">Elecssories</option>
                      <option value="2">HealthBeauty</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="addChooseBrand">Choose Brand:</label>
                    <select class="form-control" ng-model="addChooseBrand" >
                      <option ng-repeat="allBrand in allBrands" value="{{allBrand.BrandID}}">{{allBrand.BrandName}}</option>
                    </select>
                  </div>
                  <div class="form-group" ng-class="{'has-error':myForm.addVarName.$invalid}">
                    <label for="addNewVarName">Enter New Variant Name</label>
                    <div class="input-group">
                      <span class="input-group-addon">_</span>
                      <input type="text" name="addVarName" class="form-control" ng-model="addNewVarName" ng-maxlength="4" required>
                    </div>
                  </div>
                </div>
              </tab>
            </tabset>
          </div>
          <div class="{{bubleClassName}}" ng-show='true'>
            <strong>{{bubleTitle}}</strong>{{bubleMsg}}
            </div>  
        </div>
        <div class="modal-footer">
          <input type="button" ng-click="addNewProduct(parameter)" style="display:{{newBrand}}" class="btn btn-success" value="Add" ng-disabled="((myForm.lauchVarName.$invalid)||(myForm.newBrandName.$invalid))"/>
          <input type="button" style="display:{{newVariant}}" ng-click="addNewProduct(parameter)" class="btn btn-success" value="Add2" ng-disabled="(myForm.addVarName.$invalid)">
          <input type="button" class="btn btn-warning cancel" ng-click="closeProductModal()" value="Cancel">
        </div>
      </form>
    </div>
  </div>
</div>
<!--dialog end-->