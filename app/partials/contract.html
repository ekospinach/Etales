<div id="content" class="bs-header">
    <div class="container">
        <h1>{{Label.getContent('Negotiation')}}</h1>
        <p>{{Label.getContent('Negotiation Info')}}</p>
    </div>
</div>

<div class="bs-old-docs">
    <div class="container">
        <strong>
        </strong>
    </div>
</div>

<div class="container bs-docs-container">
	<div class="row">
		<div class="col-md-12">
		    <div class="bs-docs-section">
		    	<div class="page-header">
			    	<h3>{{Label.getContent('Contract List')}}<small>{{Label.getContent('Contract List Info')}}</small></h3>	    		
		    	</div>
		    	<div class="pull-left">
		    		<!--
		    		<div class="btn-group pull-left" data-toggle="buttons" ng-show="false">
			            <label class="btn btn-default" ng-click="">
			            	<input type="radio" name="options">English
			            </label>
			            <label class="btn btn-default" ng-click="">
			            	<input type="radio" name="options">Chinese
			            </label>
			        </div>
			    -->
			        <div class="btn-group pull-left" ng-show=retailerShow>
			        	<button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">
			        		{{Label.getContent('Producer')}}<span class="caret"></span>
			            </button>
			            <ul class="dropdown-menu">
			              <li class=""><a ng-click="filterUser(1,retailerID)">{{Label.getContent('Producer')}} 1</a></li>
			              <li class=""><a ng-click="filterUser(2,retailerID)">{{Label.getContent('Producer')}} 2</a></li>
			              <li class=""><a ng-click="filterUser(3,retailerID)">{{Label.getContent('Producer')}} 3</a></li>         
			            </ul>
			        </div>
			        <div class="btn-group pull-left" ng-show=producerShow>
			        	<button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" style="margin-left:10px">
			        		{{Label.getContent('Retailer')}} <span class="caret"></span>
			            </button>
			            <ul class="dropdown-menu">
			              <li class=""><a ng-click="filterUser(producerID,1)">{{Label.getContent('Retailer')}} 1</a></li>
			              <li class=""><a ng-click="filterUser(producerID,2)">{{Label.getContent('Retailer')}} 2</a></li>      
			            </ul>
			        </div>
			    </div>
			    <div style="clear:both"></div>
			    <table class="table table-hover table-condensed">
			    	<thead>
			    		<tr>
			    			<th>{{Label.getContent('Contract Name')}}</th>
                            <th>{{Label.getContent('Period')}}</th>
                            <th>{{Label.getContent('Producer')}}</th>
                            <th>{{Label.getContent('Retailer')}}</th>
                            <th>{{Label.getContent('Drafted By')}}</th>
                            <th ng-show="false">{{Label.getContent('isLock')}}?</th>
                            <th></th>
			    		</tr>
			    	</thead>
			    	<tbody>
				     	<tr ng-repeat="allContract in allContracts">
				    		<td>{{allContract.contractCode.substring(0,allContract.contractCode.indexOf('_'))}}</td>
				    		<td>{{allContract.period}}</td>
				    		<td>Producer-{{allContract.producerID}}</td>
				    		<td>Retailer-{{(allContract.retailerID)}}</td>
				    		<td>{{(allContract.draftedByCompanyID>3)?'Retailer':'Producer'}}-{{(allContract.draftedByCompanyID>3)?(allContract.draftedByCompanyID-4):allContract.draftedByCompanyID}}</td>
				    		<td ng-show="false">
				    			<fieldset disabled>
				    				<div class="checkbox">
				    					<label>
				    						<input type="checkbox" checked ng-show=(allContract.isDraftFinished)>
				    						<input type="checkbox" ng-show=(!allContract.isDraftFinished)>
				    					</label>
				    				</div>
				    			</fieldset>
				    		</td>
				    		<td>
				    			<a class="btn btn-primary" ng-click="openDetailModal(allContract)">
				    				{{Label.getContent('Details')}}
				    			</a>
				    			<a class="btn btn-default" ng-show=(producerShow&&(allContract.period==currentPeriod)) ng-click="openDuplicateModal(allContract)">
				    				{{Label.getContent('Duplicate')}}
				    			</a>			    				
				    		</td>			    		
				    	</tr>
			    	</tbody>
			    </table>
			    <a class="btn btn-primary" ng-click="openInsertModal()" ng-show=producerShow>
			    	{{Label.getContent('New Contract')}}</a>
		    </div>
		</div>
	</div>
</div>


<!--dialogs-->
<div modal="insertModal" class="hide" close="closeInsertModal()" options="insertOpts">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeInsertModal()">&times;</button>
				<h4 class="modal-title">{{Label.getContent('New Negotiation')}}</h4>
			</div>
			<div class="modal-body">
				<div class="form-group">
					<label for="contractCode">{{Label.getContent('New contract name')}}</label>
					<div style="clear:both"></div>
					<div class="col-xs-5 input-group">
						<input type="text" id="contractCode" placeholder="contractCode" class="form-control" ng-model="newContractCode" required>
					</div>
					<div style="clear:both"></div>
				</div>
				<div class="form-group">
					<label for="retailerID">{{Label.getContent('Contract with')}}</label>
					<div style="clear:both"></div>
					<div class="col-xs-5">
						<select class="form-control" ng-model="newRetailerID">
							<option value="1">{{Label.getContent('Retailer')}} 1</option>
							<option value="2">{{Label.getContent('Retailer')}} 2</option>
						</select>
					</div>
					<div style="clear:both"></div>
				</div>
				<div class="{{insertBubleClassName}}" ng-show='true'>
        			<strong>{{insertBubleTitle}}</strong>{{insertMessage}}
        		</div>	
			</div>
			<div class="modal-footer">
				<a class="btn btn-default" ng-click="closeInsertModal()">{{Label.getContent('Cancel')}}</a>
				<a class="btn btn-primary" ng-click="addNewContract()">{{Label.getContent('Add')}}</a>
			</div>
		</div>
	</div>
</div>

<dic modal="duplicateModal" class="hide" close="closeDuplicateModal()" options="duplicateOpts">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeDuplicateModal()">&times;</button>
				<h4 class="modal-title">{{Label.getContent('Duplicate Negotiation')}}</h4>
			</div>
			<div class="modal-body">
				<div class="form-group">
					<label for="contractCode">{{Label.getContent('New contract name')}}</label>
					<div style="clear:both"></div>
					<div class="col-xs-5 input-group">
						<input type="text" id="contractCode" placeholder="contractCode" class="form-control" ng-model="duplicateContractCode" required>
					</div>
					<div style="clear:both"></div>
				</div>
				<div class="{{duplicateBubleClassName}}" ng-show='true'>
        			<strong>{{duplicateBubleTitle}}</strong>{{duplicateMessage}}
        		</div>	
			</div>
			<div class="modal-footer">
				<a class="btn btn-default" ng-click="closeDuplicateModal()">{{Label.getContent('Cancel')}}</a>
				<a class="btn btn-primary" ng-click="duplicate(contract)">{{Label.getContent('Duplicate')}}</a>
			</div>
		</div>
	</div>
</div>