<div id="content" class="bs-header">
    <div class="container">
        <h1>{{Label.getContent('Negotiation')}}</h1>
        <p>{{Label.getContent('Negotiation Info')}}</p>
    </div>
</div>

<div class="bs-old-docs">
    <div class="container">
        <strong>
        	{{Label.getContent('Negotiation hints')}}
        </strong>
    </div>
</div>

<div class="container bs-docs-container">
	<div class="row">
		<div class="col-md-12">
		    <div class="bs-docs-section">
		    	<div class="page-header">
			    	<h3>{{Label.getContent('Contract List')}}
			    		<small>{{Label.getContent('Contract List Info')}}</small>
			    	</h3>	    		
		    	</div>
		    	<div class="pull-left">
			        <div class="btn-group pull-left" ng-show=retailerShow>
			        	<button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown">
			        		{{Label.getContent('Producer')}}<span class="caret"></span>
			            </button>
			            <ul class="dropdown-menu">
			              <li class=""><a ng-click="filterUser(1,retailerID)">{{Label.getContent('Producer')}} 1</a></li>
			              <li class=""><a ng-click="filterUser(2,retailerID)">{{Label.getContent('Producer')}} 2</a></li>
			              <li class=""><a ng-click="filterUser(3,retailerID)">{{Label.getContent('Producer')}} 3</a></li>         
			            </ul>
			        </div>
			        <div class="btn-group pull-left" ng-show=producerShow>
			        	<button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" style="margin-left:10px">
			        		{{Label.getContent('Retailer')}} <span class="caret"></span>
			            </button>
			            <ul class="dropdown-menu">
			              <li class=""><a ng-click="filterUser(producerID,1)">{{Label.getContent('Retailer')}} 1</a></li>
			              <li class=""><a ng-click="filterUser(producerID,2)">{{Label.getContent('Retailer')}} 2</a></li>      
			            </ul>
			        </div>
			    </div>
			    <div style="clear:both"></div>
			    <table class="table table-hover table-condensed">
			    	<thead>
			    		<tr>
			    			<th style="width:20%">{{Label.getContent('Contract Name')}}</th>
                            <th style="width:10%">{{Label.getContent('Period')}}</th>
                            <th style="width:15%">{{Label.getContent('Producer')}}</th>
                            <th style="width:15%">{{Label.getContent('Retailer')}}</th>
                            <th style="width:10%">{{Label.getContent('isLock')}}?</th>
                            <th></th>
			    		</tr>
			    	</thead>
			    	<tbody>
				     	<tr ng-repeat="allContract in allContracts">
				    		<td>{{allContract.contractCode.substring(0,allContract.contractCode.indexOf('_'))}}</td>
				    		<td>{{allContract.period}}</td>
				    		<td>{{Label.getContent('Producer')}}-{{allContract.producerID}}</td>
				    		<td>{{Label.getContent('Retailer')}}-{{(allContract.retailerID)}}</td>
				    		<td>
				    			<fieldset disabled>
				    				<div class="checkbox">
				    					<label>
				    						<input type="checkbox" checked ng-show=(allContract.isLocked)>
				    						<input type="checkbox" ng-show=(!allContract.isLocked)>
				    					</label>
				    				</div>
				    			</fieldset>
				    		</td>
				    		<td>
				    			<a class="btn btn-primary" ng-show="(!facilitatorShow)" ng-click="openDetailModal(allContract)">
				    				{{Label.getContent('Details')}}
				    			</a>
				    			<a class="btn btn-primary" ng-show='facilitatorShow' ng-click='openPlayerModal(allContract)' access-level='{{accessLevels.facilitatorView}}'>
				    				{{Label.getContent('Details')}}
				    			</a>
				    			<a class="btn btn-default" ng-show=(producerShow&&(allContract.period==currentPeriod)) ng-click="openDuplicateModal(allContract)">
				    				{{Label.getContent('Duplicate')}}
				    			</a>
				    			<a class="btn btn-danger" ng-click="setLock(allContract)" access-level='{{accessLevels.facilitatorView}}'>
				    				{{Label.getContent('Lock')}}
				    			</a>
				    			<a class="btn btn-default" ng-click="setUnLock(allContract)"access-level='{{accessLevels.facilitatorView}}'>
				    				{{Label.getContent('UnLock')}}
				    			</a> 	
				    		</td>			    		
				    	</tr>
			    	</tbody>
			    </table>
			    <a class="btn btn-primary" ng-click="openInsertModal()" ng-show=producerShow>
			    	{{Label.getContent('New Contract')}}
			    </a>
			    <!--
			    <a class="btn btn-primary" ng-click="openPlayerModal()" access-level='{{accessLevels.facilitatorView}}'>
			    	{{Label.getContent('Choose Player')}}
			    </a>-->

		    </div>
		</div>
	</div>
</div>


<!--dialogs-->
<div modal="insertModal" class="hide" close="closeInsertModal()" options="insertOpts">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeInsertModal()">&times;</button>
				<h4 class="modal-title">{{Label.getContent('New Negotiation')}}</h4>
			</div>
			<div class="modal-body">

				<form class="form-horizontal" name="myForm" role="form">
					<div class="form-group" ng-class="{'has-error': myForm.newContractCode.$invalid}">
						<label for="contractCode" class="col-sm-4 control-label">{{Label.getContent('New contract name')}}:</label>
					    <div class="col-sm-8">
					    	<input type="text" id="contractCode" placeholder="contractCode" name="newContractCode" class="form-control" ng-model="newContractCode" ng-maxlength="10" required>
					    </div>
					</div>
					<div class="form-group">
						<label for="retailerID" class="col-sm-4 control-label">{{Label.getContent('Contract with')}}:</label>
						<div class="col-sm-8">
							<select class="form-control" ng-model="newRetailerID">
								<option value="1">{{Label.getContent('Retailer')}} 1</option>
								<option value="2">{{Label.getContent('Retailer')}} 2</option>
							</select>
						</div>
					</div>
				</form>
				<div class="{{insertBubleClassName}}" ng-show='true'>
        			<strong>{{insertBubleTitle}}</strong>{{insertMessage}}
        		</div>	
			</div>
			<div class="modal-footer">
				<a class="btn btn-default" ng-click="closeInsertModal()">{{Label.getContent('Cancel')}}</a>
				<a class="btn btn-primary" ng-disabled="myForm.newContractCode.$invalid" ng-click="addNewContract()">{{Label.getContent('Add')}}</a>
			</div>
		</div>
	</div>
</div>

<div modal="duplicateModal" class="hide" close="closeDuplicateModal()" options="duplicateOpts">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closeDuplicateModal()">&times;</button>
				<h4 class="modal-title">{{Label.getContent('Duplicate Negotiation')}}</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal" name="myForm" role="form">
					<div class="form-group" ng-class="{'has-error':myForm.duplicateContractCode.$invalid}">
					    <label for="contractCode" class="col-sm-4 control-label">{{Label.getContent('New contract name')}}:</label>
					    <div class="col-sm-8">
					    	<input type="text" id="contractCode" placeholder="contractCode" name="duplicateContractCode" class="form-control" ng-model="duplicateContractCode" ng-maxlength="10" required>
					    </div>
					</div>
					<div class="form-group">
						<label for="retailerID" class="col-sm-4 control-label">{{Label.getContent('Contract with')}}:</label>
						<div class="col-sm-8">
							<label id="retailerID" class="control-label">{{Label.getContent('Retailer')}} {{dupRetailerID}}</label>
						</div>
					</div>
				</form>
				<div class="{{duplicateBubleClassName}}" ng-show='true'>
        			<strong>{{duplicateBubleTitle}}</strong>{{duplicateMessage}}
        		</div>		
			</div>
			<div class="modal-footer">
				<a class="btn btn-default" ng-click="closeDuplicateModal()">{{Label.getContent('Cancel')}}</a>
				<a class="btn btn-primary" ng-disabled="myForm.duplicateContractCode.$invalid" ng-click="duplicate(contract)">{{Label.getContent('Duplicate')}}</a>
			</div>
		</div>
	</div>
</div>

<div modal="playerModal" class="hide" close="closePlayerModal()" options="playerOpts">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="closePlayerModal()">&times;</button>
				<h4 class="modal-title">{{Label.getContent('Choose Player')}}</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal" role="form">
					<div class="form-group">
						<label for="userRole" class="col-sm-4 control-label">{{Label.getContent('Choose Your Role')}}:
						</label>
						<div class="col-sm-6">
							<select class="form-control" ng-model="userRole" ng-change="setPlayer(userRole)">
					    		<!--
					    		<option value="1">{{Label.getContent('Producer')}} 1</option>
								<option value="2">{{Label.getContent('Producer')}} 2</option>
								<option value="3">{{Label.getContent('Producer')}} 3</option>
								<option value="4">{{Label.getContent('Producer')}} 4</option>
								<option value="5">{{Label.getContent('Retailer')}} 1</option>
								<option value="6">{{Label.getContent('Retailer')}} 2</option>
								<option value="7">{{Label.getContent('Traditional Trade')}}</option>
								<option value="8">{{Label.getContent('eMall')}}</option>-->
								<option value='{{contract.producerID}}'>{{Label.getContent('Producer')}} {{contract.producerID}}
								</option>
								<option value='{{contract.retailerID+4}}'>{{Label.getContent('Retailer')}} {{contract.retailerID}}
								</option>
							</select>
						</div>
					</div>
				</form>
			</div>
			<div class="modal-footer">
				<a class="btn btn-default" ng-click="closePlayerModal()">{{Label.getContent('Cancel')}}</a>
				<a class="btn btn-primary" ng-click="setFinish()">{{Label.getContent('OK')}}</a>
			</div>
		</div>
	</div>
</div>